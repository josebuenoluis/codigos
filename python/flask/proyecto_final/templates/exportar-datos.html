{% extends 'base.html' %}
{% block title %} Historico-Asistencias {% endblock %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/exportar-datos.css') }}">
{% endblock %}
{% block content %}
<main>
    <div class="container">
        <div class="card my-4">
            <div class="card-body">
                <div class="row d-flex justify-content-center mb-4">
                    <div class="col-12 col-lg-8">
                        <h2 class="text-center border-bottom">Exportar datos</h2>
                    </div>
                </div>
                <div class="row d-flex justify-content-around flex-wrap">
                    <div class="col-10 col-sm-5 col-lg-3 mb-4">
                        <div class="input-group">
                            <input type="text" readonly class="form-control" id="input-filters"
                                placeholder="Aplicar filtros..." style="cursor: pointer;">
                            <button type="button" class="input-group-text" id="filters-button">
                                <i class="bi bi-funnel-fill fs-4"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-10 col-sm-5 col-lg-3 mb-4">
                        <div class="input-group">
                            <input type="text" readonly class="form-control" id="input-csv"
                                placeholder="Exportar CSV" style="cursor: pointer;" onclick="obtenerAsistencias()">
                            <button type="button" class="input-group-text" id="csv-button" onclick="obtenerAsistencias()">
                                <i class="bi bi-download fs-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="row d-flex justify-content-center mb-3">
                    <div class="col-12">
                        <div class="table-responsive border border-1" style="max-height: 400px;min-height:400px; overflow-y: auto;">
                            <table class="table text-center table-hover" id="tabla-asistencias">
                                <thead class="table-light" style="position:sticky; top: 0;">
                                    <tr>
                                        <th scope="col">Id</th>
                                        <th scope="col">NIF</th>
                                        <th scope="col">Habitacion</th>
                                        <th scope="col">Cama</th>
                                        <th scope="col">Fecha llamada</th>
                                        <th scope="col">Fecha presencia</th>
                                        <th scope="col">Estado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for asistencia in asistencias %}
                                        <tr>
                                            <td>{{asistencia.id}}</td>
                                            <td>{{asistencia.dni}}</td>
                                            <td>{{asistencia.habitacion_fk}}</td>
                                            <td>{{asistencia.cama_fk}}</td>
                                            <td>{{asistencia.fecha_llamada}}</td>
                                            <td>{{asistencia.fecha_presencia}}</td>
                                            <td>{{asistencia.estado}}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Button trigger modal -->
                <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Launch demo modal
                </button> -->
                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                            ...
                            </div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/exportar-datos.js') }}"></script>
{% endblock %}